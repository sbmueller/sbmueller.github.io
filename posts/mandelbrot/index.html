<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://sbmueller.de/ name=base><title>
            
                Plotting a Mandelbrot set in ðŸ¦€ Rust
            
        </title><meta content="Plotting a Mandelbrot set in ðŸ¦€ Rust" property=og:title><link href=https://sbmueller.de/icon/favicon.png rel=icon type=image/png><link href=https://sbmueller.de/fonts.css rel=stylesheet><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://sbmueller.de/theme/light.css rel=stylesheet><link href=https://sbmueller.de/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://sbmueller.de/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://sbmueller.de/main.css media=screen rel=stylesheet><body><div class=left-content></div><div class=content><style>.avatar{vertical-align:middle;border-radius:50%;max-width:150px;height:auto}#wrapper{clear:both;text-align:center;width:100%}</style><nav><div class=left-nav><a href=https://sbmueller.de/>sbmueller</a><div class=socials><a class=social href=https://github.com/sbmueller/ rel=me> <img alt=github src=https://sbmueller.de/icons/social/github.svg> </a><a class=social href=https://www.linkedin.com/in/sbmueller/ rel=me> <img alt=linkedin src=https://sbmueller.de/icons/social/linkedin.svg> </a></div></div><div class=right-nav><a href=https://sbmueller.de/about style=margin-right:.5em>/about</a><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://sbmueller.de/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://sbmueller.de/icons/moon.svg> </a><script>updateItemToggleTheme()</script></div></nav><div id=wrapper><a href=https://sbmueller.de/> <img src="https://avatars.githubusercontent.com/u/7465688?v=4" class=avatar> </a></div><div data-selector="main article p" class=visible-element-observer-root><main><article><div class=title><div class=page-header>Plotting a Mandelbrot set in ðŸ¦€ Rust</div><div class=meta>Posted on <time>2022-11-12</time></div></div><section class=body><p>Trying to <a href=https://sotr.blog rel=external>shaking off the rust</a>, I recently implemented a <a href=https://en.wikipedia.org/wiki/Mandelbrot_set rel=external>Mandelbrot</a> plotter in Rust. I have to admin, despite being familiar with the pretty images, I never looked into the math behind it.<h2 id=mandelbrot-set>Mandelbrot Set</h2><p>The Mandelbrot set is basically about convergence of a complex recursion. Assuming the series<p>$$ z_0(c) = 0 + 0i $$ $$ z_{n+1}(c) = z_n^2 + c $$<p>the Mandelbrot set is the set of numbers <code>C</code>, for which this series converges against a finite number for a sufficiently "high" number <code>n</code> (typically 100).<p>When plotting a Mandelbrot set, the pixel coordinate of the image is taken as complex input <code>c</code>. To determine if the series converges against a finite number, for each iteration it is checked if the <em>norm</em> of <code>z</code> is lower than an arbitrary number (e.g. 2), kind of a stability margin. If this is the case for all iterations until <code>n</code>, <code>c</code> is considered part of the Mandelbrot set (and is typically colored black).<p>Values of <code>c</code>, that lead to the iteration leaving the stability margin, are excluded from the Mandelbrot set. In plotting, usually a color map is applied that tells "how unstable" the series is, e.g. "how quickly" it diverges.<h2 id=rust-implementation>Rust Implementation</h2><p>An iterative approach to calculating the iterations to instability for a given <code>c</code> and <code>n = num_iterations</code> can be found here:<pre class=giallo style=color:#e0def4;background-color:#232136><code data-lang=rust><span class=giallo-l><span style=color:#3e8fb0>type</span><span style=color:#9ccfd8> ComplexDouble</span><span style=color:#3e8fb0> =</span><span style=color:#9ccfd8> Complex</span><span style=color:#908caa>&lt;</span><span style=color:#9ccfd8>f64</span><span style=color:#908caa>>;</span></span>
<span class=giallo-l><span style=color:#3e8fb0>fn</span><span style=color:#ea9a97> mandelbrot</span><span style=color:#908caa>(</span><span style=font-style:italic>c</span><span style=color:#3e8fb0>: &</span><span style=color:#9ccfd8>ComplexDouble</span><span style=color:#908caa>,</span><span style=font-style:italic> num_iterations</span><span style=color:#3e8fb0>:</span><span style=color:#9ccfd8> u32</span><span style=color:#908caa>)</span><span style=color:#3e8fb0> -></span><span style=color:#9ccfd8> u32</span><span style=color:#908caa> {</span></span>
<span class=giallo-l><span style=color:#3e8fb0>    let mut</span><span style=font-style:italic> diverge_count</span><span style=color:#3e8fb0>:</span><span style=color:#9ccfd8> u32</span><span style=color:#3e8fb0> =</span><span style=color:#ea9a97> 0</span><span style=color:#908caa>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#3e8fb0>    let mut</span><span style=font-style:italic> z</span><span style=color:#3e8fb0> =</span><span style=color:#9ccfd8> ComplexDouble</span><span style=color:#3e8fb0>::</span><span style=color:#ea9a97>new</span><span style=color:#908caa>(</span><span style=color:#ea9a97>0</span><span style=color:#908caa>.</span><span style=color:#ea9a97>0</span><span style=color:#908caa>,</span><span style=color:#ea9a97> 0</span><span style=color:#908caa>.</span><span style=color:#ea9a97>0</span><span style=color:#908caa>);</span></span>
<span class=giallo-l><span style=color:#3e8fb0>    while</span><span style=font-style:italic> diverge_count</span><span style=color:#3e8fb0> &lt;=</span><span style=font-style:italic> num_iterations</span><span style=color:#908caa> {</span></span>
<span class=giallo-l><span style=color:#3e8fb0>        if</span><span style=font-style:italic> z</span><span style=color:#3e8fb0>.</span><span style=color:#ea9a97>norm</span><span style=color:#908caa>() ></span><span style=color:#ea9a97> 2</span><span style=color:#908caa>.</span><span style=color:#ea9a97>0</span><span style=color:#908caa> {</span></span>
<span class=giallo-l><span style=color:#3e8fb0>            return</span><span style=font-style:italic> diverge_count</span><span style=color:#908caa>;</span></span>
<span class=giallo-l><span style=color:#908caa>        }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=font-style:italic>        z</span><span style=color:#3e8fb0> =</span><span style=font-style:italic> z</span><span style=color:#3e8fb0>.</span><span style=color:#ea9a97>powi</span><span style=color:#908caa>(</span><span style=color:#ea9a97>2</span><span style=color:#908caa>)</span><span style=color:#3e8fb0> +</span><span style=font-style:italic> c</span><span style=color:#908caa>;</span></span>
<span class=giallo-l><span style=font-style:italic>        diverge_count</span><span style=color:#3e8fb0> +=</span><span style=color:#ea9a97> 1</span><span style=color:#908caa>;</span></span>
<span class=giallo-l><span style=color:#908caa>    }</span></span>
<span class=giallo-l><span style=font-style:italic>    num_iterations</span></span>
<span class=giallo-l><span style=color:#908caa>}</span></span></code></pre><p>To enable a nice color map, the function returns a <code>u32</code> rather than a <code>bool</code>. If the returned value equals <code>num_iterations</code>, then <code>c</code> is part of the Mandelbrot set. If it is lower, it means it left the stability margin before calculating all iterations and therefore is unstable and not part of the Mandelbrot set.<p>I will leave out the details on how to plot the image, for the interested, the full code can be found on <a href=https://github.com/sbmueller/mandelbrot.rs rel=external>GitHub</a>.<p>The final output looks like this: <img alt=Mandelbrot src=/images/mandelbrot.png><p>Different parts of the shape have been named and are worth to follow up outside this post. For me, it is astonishing that searching for stable values of <code>c</code>, there doesn't seem like a simple answer but a rather messy/chaotic structure, that can completely change for smallest variations of <code>c</code>. The Mandelbrot set is a fascinating mathematical phenomenon and there is much to explore further.</section></article></main></div><hr><center><small>Copyright Â© 2026 Sebastian MÃ¼ller. All rights reserved.</small></center></div><div class=right-content></div>